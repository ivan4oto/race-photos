server:
  port: 8080
  servlet:
    session:
      cookie:
        name: rp_session
        http-only: true
        secure: ${SESSION_COOKIE_SECURE:false}
        same-site: lax

spring:
  application:
    name: race-photos-api
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/racephotos}
    username: ${DB_USERNAME:racephotos}
    password: ${DB_PASSWORD:secret}
  security:
    user:
      name: ${BASIC_AUTH_USER:api}
      password: ${BASIC_AUTH_PASSWORD:changeit}
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
  mvc:
    problemdetails:
      enabled: true

aws:
  region: ${AWS_REGION:eu-central-1}
  s3:
    bucket: ${AWS_S3_BUCKET:race-photos-test-bucket}
    endpoint: ${AWS_S3_ENDPOINT:}
    path-style-enabled: ${AWS_S3_PATH_STYLE:false}
    presign:
      expiration-seconds: ${AWS_S3_PRESIGN_EXPIRATION_SECONDS:7200}
  rekognition:
    collection-prefix: ${AWS_REKOGNITION_COLLECTION_PREFIX:race-photos-event}
    endpoint: ${AWS_REKOGNITION_ENDPOINT:}
    search:
      max-faces: ${AWS_REKOGNITION_SEARCH_MAX_FACES:50}
      threshold: ${AWS_REKOGNITION_SEARCH_THRESHOLD:85}
  dynamodb:
    table: ${AWS_DYNAMODB_FACE_TABLE:race-photos-face-metadata}
    endpoint: ${AWS_DYNAMODB_ENDPOINT:}

cognito:
  region: ${COGNITO_REGION:us-east-1}
  user-pool-id: ${COGNITO_USER_POOL_ID:us-east-1_example}
  app-client-id: ${COGNITO_APP_CLIENT_ID:exampleclientid}
  jwk-cache-ttl: ${COGNITO_JWK_CACHE_TTL:PT60M}

app:
  cors:
    allowed-origins: ${APP_ALLOWED_ORIGINS:http://localhost:4200}

logging:
  level:
    root: INFO
